<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Notifications - MHD Pronos</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
    }
    .notification-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1rem;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }
    .notification-card:hover {
      transform: translateY(-4px);
      box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.4);
    }
    .badge-new {
      background-color: #10B981;
      color: white;
      padding: 0.25rem 0.6rem;
      font-size: 0.75rem;
      border-radius: 9999px;
      margin-left: 0.5rem;
    }
  </style>
</head>
<body>

  <!-- HEADER -->
  <header class="text-center py-6">
    <h1 class="text-4xl font-extrabold text-blue-400">NOTIFICATIONS</h1>
    <p class="text-gray-400 mt-2">Restez inform√© des derni√®res nouvelles et mises √† jour. Inscrivez-vous avec le code promo <strong>AXEX</strong> et gagnez jusqu'√† <strong>169.000F</strong></p>
  </header>

  <!-- BOUTONS DE NAVIGATION -->
  <nav class="flex flex-wrap justify-center gap-3 mb-8">
    <a href="home.html" class="bg-blue-600 hover:bg-blue-700 px-5 py-2 rounded-lg">ACCUEIL</a>
    <a href="astuce.html" class="bg-blue-600 hover:bg-blue-700 px-5 py-2 rounded-lg">ASTUCES</a>
    <a href="vip.html" class="bg-blue-600 hover:bg-blue-700 px-5 py-2 rounded-lg">VIP</a>
    <a href="victoires.html" class="bg-blue-600 hover:bg-blue-700 px-5 py-2 rounded-lg">VICTOIRES</a>
  </nav>

  <!-- BOUTON ACTUALISER -->
  <div class="text-center mb-6">
    <button onclick="loadNotifications()" class="bg-green-600 hover:bg-green-700 px-6 py-2 rounded-lg font-semibold">ACTUALISER LES NOTIFICATIONS</button>
  </div>

  <!-- LISTE DES NOTIFICATIONS -->
  <main class="max-w-3xl mx-auto px-4" id="notificationsContainer">
    <p class="text-center text-gray-400">Chargement des notifications...</p>
  </main>

  <!-- PARTENAIRES -->
  <section class="text-center mt-16">
    <h2 class="text-2xl font-bold text-blue-400 mb-6">NOS PARTENAIRES</h2>
    <div class="flex flex-wrap justify-center gap-3">
      <a href="https://bit.ly/1xbetins_mhd_axex" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">1XBET</a>
      <a href="https://bwredir.com/1Xxd?p=%2Fregistration%2F" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">BETWINNER</a>
      <a href="https://1wyvrz.life/?p=vteh" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">1WIN</a>
      <a href="https://refpa3665.com/L?tag=d_2526373m_45415c_&site=2526373&ad=45415" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">MELBET</a>
      <a href="https://top100bonus.com/L?tag=d_2625843m_37513c_&site=2625843&ad=37513" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">888STARZ</a>
      <a href="https://combodef.com/L?tag=d_3703799m_60651c_&site=3703799&ad=60651" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">PARIPESA</a>
      <a href="https://gpaff.top/L?tag=d_3453290m_69627c_&site=3453290&ad=69627" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">GOLDPARI</a>
      <a href="https://refpazitag.top/L?tag=d_2561833m_25437c_&site=2561833&ad=25437" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">MEGAPARI</a>
      <a href="https://lb-aff.com/L?tag=d_2378251m_22611c_&site=2378251&ad=22611" target="_blank" class="bg-indigo-600 px-4 py-2 rounded-lg">LINEBET</a>
    </div>
  </section>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, query, orderBy, getDocs } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCoR8lWMJbB0Pgr-F86v3hwWlX4XT3TQ1k",
      authDomain: "mhd-pronos.firebaseapp.com",
      projectId: "mhd-pronos",
      storageBucket: "mhd-pronos.firebasestorage.app",
      messagingSenderId: "366441954219",
      appId: "1:366441954219:web:a8be6641c5c922c59cf0ee"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadNotifications() {
      const container = document.getElementById("notificationsContainer");
      container.innerHTML = "<p class='text-center text-gray-400'>Chargement des notifications...</p>";

      const q = query(collection(db, "notifications"), orderBy("date", "desc"));
      const querySnapshot = await getDocs(q);

      if (querySnapshot.empty) {
        container.innerHTML = "<p class='text-center text-gray-500'>Aucune notification pour le moment.</p>";
        return;
      }

      container.innerHTML = "";
      const now = Date.now();

      querySnapshot.forEach((doc) => {
        const data = doc.data();
        const diffHeures = (now - data.date.toMillis()) / (1000 * 60 * 60);
        const isNew = diffHeures < 24; // üÜï badge si moins de 24h

        container.innerHTML += `
          <div class="notification-card">
            <div class="flex items-center justify-between mb-2">
              <h3 class="text-xl font-semibold">${data.titre} ${isNew ? "<span class='badge-new'>Nouveau</span>" : ""}</h3>
              <span class="text-sm text-gray-400">${new Date(data.date.toMillis()).toLocaleString()}</span>
            </div>
            <p class="text-gray-300 mb-2">${data.message}</p>
            ${data.lien ? `<a href="${data.lien}" target="_blank" class="text-blue-400 hover:underline">Voir plus</a>` : ""}
          </div>
        `;
      });
    }

    loadNotifications();
  </script>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getFirestore, collection, getDocs, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCoR8lWMJbB0Pgr-F86v3hwWlX4XT3TQ1k",
    authDomain: "mhd-pronos.firebaseapp.com",
    projectId: "mhd-pronos",
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  async function marquerToutesCommeLues() {
    const querySnapshot = await getDocs(collection(db, "notifications"));
    querySnapshot.forEach(async (notif) => {
      await updateDoc(doc(db, "notifications", notif.id), { lu: true });
    });
  }

  marquerToutesCommeLues();
</script>
</body>
</html>
